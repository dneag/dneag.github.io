<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="style.css" rel="stylesheet">
        <link href="../dist/output.css" rel="stylesheet">
        <title>Dan Neag - Code and Artwork</title>
    </head>
    <body class="bg-slate-50 h-screen" onload="handleQueryString()">
        <div class="border-2 titleBarHeight">
            <h1 class="text-5xl text-inherit font-light px-12 pt-5">Dan Neag - Portfolio</h1>
            <hr class="h-px my-3 border-0 bg-gradient-to-r from-gray-700">
        </div>
        <div class="overflow-hidden sideBarAndContent contentHeight">
            <div class=" bg-slate-200 pl-14 mt-2 rounded-lg overflow-hidden">
                <div>
                    <button id="resumeButton" onclick="setQueryString('Dan_Neag_Resume.pdf')" 
                            class="font-light hover:text-gray-400 w-full text-left"
                            style="font-size: 32px;">Resume</button>
                    <hr class="h-px w-4/5 border-0 bg-gradient-to-r from-gray-700">
                </div>
                <div class="mt-4 font-light space-y-1" style="font-size: 19px;">
                    <button id="treesButton" onclick="setQueryString('trees.html')"
                            class="hover:text-gray-400 w-full text-left">Trees</button><br>
                    <button id="ddkButton" onclick="setQueryString('ddk-review.html')"
                            class="hover:text-gray-400 w-full text-left">DDK Review</button>
                </div>
            </div>
            <div class="mt-2 rounded-lg">
                <iframe id="content" title="contentIframe" src="" target="_parent" class="h-full w-full"></iframe>
            </div>
        </div>
    </body>
</html>

<script>

const navButtons = new Map();

navButtons.set('Dan_Neag_Resume.pdf', document.getElementById("resumeButton"));
navButtons.set('trees.html', document.getElementById("treesButton"));
navButtons.set('ddk-review.html', document.getElementById("ddkButton"));

// Replaces the current url to include the new query string
// This triggers index.html's onload function, handleQueryString(), which will then trigger
//    setContent(), which will set the html file for the content iframe
function setQueryString(contentValue) {

    const newQuery = "?content=" + contentValue;
    const oldQuery = window.location.search.substring(0);
    let newURL;

    if (newQuery != oldQuery) {

        if (oldQuery === "")
            newURL = window.location.href.concat(newQuery)
        else 
            newURL = window.location.href.replace(oldQuery, newQuery)

        window.location.replace(newURL)
    }
}

function handleQueryString() {

    var query = window.location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {

        var pair = vars[i].split('=');
        if (pair[0] == 'content') {
            setcontent(pair[1])
        }
    }
}

function setcontent(newPage) {
    
    let currentURLArr = document.getElementById("content").src.split('/');
    let currentPage = currentURLArr[currentURLArr.length - 1].split("?")[0]

    if (currentPage != newPage) {

        const buttonFade = ["bg-gradient-to-l", "from-slate-50"];

        const currentButton = navButtons.get(currentPage)
        if (currentButton != undefined)
            currentButton.classList.remove(buttonFade[0], buttonFade[1])

        navButtons.get(newPage).classList.add(buttonFade[0], buttonFade[1])

        document.getElementById("content").src = newPage
    }
}

</script>
